<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Prison Identifier and Delius - HMPPS Probation Integration Services</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/prison-identifier-and-delius/about.html">
      <link rel="icon" sizes="48x48" href="/images/favicon.ico">
      <link rel="icon" sizes="any" href="/images/favicon.svg" type="image/svg+xml">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="ministryofjustice.github.io" />
      <meta name="twitter:image" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/images/opengraph-image.png" />
      <meta name="twitter:title" content="Prison Identifier and Delius - HMPPS Probation Integration Services" />
      <meta name="twitter:url" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/prison-identifier-and-delius/about.html" />

      <meta property="og:image" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/images/opengraph-image.png" />
      <meta property="og:site_name" content="HMPPS Probation Integration Services" />
      <meta property="og:title" content="Prison Identifier and Delius" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/prison-identifier-and-delius/about.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          HMPPS Probation Integration
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/hmpps-probation-integration-services#readme">GitHub</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://mojdt.slack.com/archives/C02HQ4M2YQN">Slack</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="../../">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#prison-identifier-and-delius"><span>Prison Identifier and Delius</span></a>
    <ul>
      <li>
        <a href="#business-need"><span>Business Need</span></a>
      </li>
      <li>
        <a href="#context-map"><span>Context Map</span></a>
      </li>
      <li>
        <a href="#workflow-triggers"><span>Workflow Triggers</span></a>
        <ul>
          <li>
            <a href="#batch-processing"><span>Batch Processing</span></a>
          </li>
          <li>
            <a href="#domain-event-processing"><span>Domain Event Processing</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#workflows"><span>Workflows</span></a>
        <ul>
          <li>
            <a href="#workflows-batch-processing"><span>Batch Processing</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#interfaces"><span>Interfaces</span></a>
        <ul>
          <li>
            <a href="#api-access-control"><span>API Access Control</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#concepts"><span>Concepts</span></a>
        <ul>
          <li>
            <a href="#person-record-matching-process"><span>Person Record Matching Process</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#api-reference"><span>API Reference</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="prison-identifier-and-delius">Prison Identifier and Delius</h1>
<p>Service that supports matching NOMIS person records to Delius person records using the basic personal details and the
recorded sentence dates.</p>
<h2 id="business-need">Business Need</h2>
<p>HMPPS has a number of systems each holding information about a person&rsquo;s interaction with different aspects of the justice system. These systems have been set up and managed over a long period of time resulting in different identifiers being used for a person in each. In order to integrate these independent systems we must match the person records using the information held in each. To achieve this for NOMIS (NOMS Number) and Delius (CRN) we query the two systems and determine that likely matches based on the data. Once we have a likely match we can link the records by adding the NOMS Number to the person record in the Delius database. When this link is in place the two systems can be integrated in other ways to support case management as the person moves through different stages of HMPPS supervision.</p>
<h2 id="context-map">Context Map</h2>
<p><a href="../../images/prison-identifier-and-delius-context-map.svg" rel="noopener noreferrer"><img src="../../images/prison-identifier-and-delius-context-map.svg" alt="Context Map" /></a></p>
<h2 id="workflow-triggers">Workflow Triggers</h2>
<h3 id="batch-processing">Batch Processing</h3>
<p>The matching process can be triggered by a request to the integration service API endpoint</p>
<div class="table-container">
        <table>
          <tr>
<th>Business Event</th>
<th>API Endpoint</th>
</tr><tr>
<td>List of CRNs to Match</td>
<td><a href="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/prison-identifier-and-delius/api-reference.html#person-match-by-crn">/person/match-by-crn</a></td>
</tr><tr>
<td>List of NOMIS IDs to Match</td>
<td><a href="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/prison-identifier-and-delius/api-reference.html#person-match-by-noms">/person/match-by-noms</a></td>
</tr>
        </table>
      </div><h3 id="domain-event-processing">Domain Event Processing</h3>
<p>The matching process will be triggered by domain events raised by Delius, once these events are implemented</p>
<div class="table-container">
        <table>
          <tr>
<th>Business Event</th>
<th>Message Event Type / Filter</th>
<th>Status</th>
</tr><tr>
<td>New Sentence Added to Delius</td>
<td>probation-case.sentence.created</td>
<td>Not yet implemented</td>
</tr><tr>
<td>Sentence Changed in Delius</td>
<td>probation-case.sentence.amended</td>
<td>Not yet implemented</td>
</tr><tr>
<td>Sentence Moved to New Delius Event</td>
<td>probation-case.sentence.move</td>
<td>Not yet implemented</td>
</tr><tr>
<td>Prisoner received into NOMIS</td>
<td>prison-offender-events.prisoner.received</td>
<td>Active</td>
</tr><tr>
<td>Prisoner merged in NOMIS</td>
<td>prison-offender-events.prisoner.merged</td>
<td>Active</td>
</tr>
        </table>
      </div><h2 id="workflows">Workflows</h2>
<h3 id="workflows-batch-processing">Batch Processing</h3>
<p><a href="../../images/prison-identifier-and-delius-workflow-id-update.svg" rel="noopener noreferrer"><img src="../../images/prison-identifier-and-delius-workflow-id-update.svg" alt="Batch Processing Workflow" /></a></p>
<h2 id="interfaces">Interfaces</h2>
<h3 id="api-access-control">API Access Control</h3>
<p>API endpoints are secured by roles supplied by the HMPPS Auth client used in
the requests</p>
<div class="table-container">
        <table>
          <tr>
<th>API Endpoint</th>
<th>Required Role</th>
</tr><tr>
<td>All</td>
<td>ROLE_PROBATION_API__PRISON_IDENTIFIER__UPDATE</td>
</tr>
        </table>
      </div><h2 id="concepts">Concepts</h2>
<h3 id="person-record-matching-process">Person Record Matching Process</h3>
<p>The logic used to match NOMIS person records to Delius person records uses the basic personal details, any additional identifiers and the recorded sentence dates.</p>
<p><a href="../../images/prison-identifier-and-delius-match-process.svg" rel="noopener noreferrer"><img src="../../images/prison-identifier-and-delius-match-process.svg" alt="Matching Process" /></a></p>
<h2 id="api-reference">API Reference</h2>

<ul>
<li><a href="api-reference.html">API Reference</a></li>
<li><a href="asyncapi-reference.html">AsyncAPI Reference</a></li>
</ul>

              <div data-module='page-expiry' data-last-reviewed-on="2025-09-24">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 24 June 2025.

        It needs to be reviewed again on 24 September 2025
        by the page owner <a href="https://mojdt.slack.com/messages/probation-integration-team">#probation-integration-team</a>
        .
    </div>

    <div class='page-expiry--expired' hidden>
      This page was set to be reviewed before 24 September 2025
       by the page owner <a href="https://mojdt.slack.com/messages/probation-integration-team">#probation-integration-team</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/doc/tech-docs/source/projects/prison-identifier-and-delius/about.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/issues/new?body=Problem+with+%27Prison+Identifier+and+Delius%27+%28https%3A%2F%2Fministryofjustice.github.io%2Fhmpps-probation-integration-services%2Ftech-docs%2Fprojects%2Fprison-identifier-and-delius%2Fabout.html%29&amp;labels=bug&amp;title=Re%3A+%27Prison+Identifier+and+Delius%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/hmpps-probation-integration-services">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../../javascripts/govuk_frontend.js" type="module"></script>
    <script src="../../javascripts/application.js"></script>
  </body>
</html>
