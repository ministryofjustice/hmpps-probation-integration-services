{"openapi":"3.1.0","info":{"title":"API Reference","contact":{"name":"Probation Integration Team","url":"https://mojdt.slack.com/archives/C02HQ4M2YQN","email":"probation-integration-team@digital.justice.gov.uk"},"license":{"name":"MIT","url":"https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/LICENSE"},"version":"1.0"},"servers":[{"url":"/"}],"security":[{"hmpps-auth-token":[]}],"paths":{"/user/{username}/password":{"post":{"tags":["User details"],"description":"Change a Delius user's password. Requires `PROBATION_API__HMPPS_AUTH__PASSWORD__RW`.","operationId":"changePassword","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","minLength":1}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChangeRequest"}}},"required":true},"responses":{"200":{"description":"Password changed successfully"},"404":{"description":"User not found"}}}},"/authenticate":{"post":{"tags":["Authentication"],"description":"Authenticate a Delius username and password. Requires `PROBATION_API__HMPPS_AUTH__AUTHENTICATE`.","operationId":"authenticate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthenticationRequest"}}},"required":true},"responses":{"200":{"description":"User authenticated","content":{"text/plain":{}}},"401":{"description":"Authentication failure","content":{"text/plain":{}}},"403":{"description":"Client role required: `DELIUS_USER_AUTH`","content":{"text/plain":{}}}}}},"/user":{"get":{"tags":["User details"],"description":"Get users by email. Requires `PROBATION_API__HMPPS_AUTH__USER_DETAILS`.","operationId":"getUsersByEmail","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserDetails"}}}}}}}},"/user/{username}":{"get":{"tags":["User details"],"description":"Get user details. Requires `PROBATION_API__HMPPS_AUTH__USER_DETAILS`.","operationId":"getUserDetails","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDetails"}}}}}}},"/user/details/{userId}":{"get":{"tags":["User details"],"description":"Get user details by Id. Requires `PROBATION_API__HMPPS_AUTH__USER_DETAILS`.","operationId":"getUserDetailsById","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDetails"}}}}}}}},"components":{"schemas":{"PasswordChangeRequest":{"type":"object","properties":{"password":{"type":"string","minLength":1}},"required":["password"]},"AuthenticationRequest":{"type":"object","properties":{"username":{"type":"string","minLength":1},"password":{"type":"string","minLength":1}},"required":["password","username"]},"UserDetails":{"type":"object","properties":{"userId":{"type":"integer","format":"int64"},"username":{"type":"string"},"firstName":{"type":"string"},"surname":{"type":"string"},"email":{"type":"string"},"enabled":{"type":"boolean"},"roles":{"type":"array","items":{"type":"string"}}},"required":["enabled","firstName","roles","surname","userId","username"]}},"securitySchemes":{"hmpps-auth-token":{"type":"http","name":"Authorization","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}