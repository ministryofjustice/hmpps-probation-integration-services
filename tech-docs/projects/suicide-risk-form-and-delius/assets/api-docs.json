{"openapi":"3.1.0","info":{"title":"API Reference","contact":{"name":"Probation Integration Team","url":"https://mojdt.slack.com/archives/C02HQ4M2YQN","email":"probation-integration-team@digital.justice.gov.uk"},"license":{"name":"MIT","url":"https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/LICENSE"},"version":"1.0"},"servers":[{"url":"/"}],"security":[{"hmpps-auth-token":[]}],"paths":{"/treatment":{"post":{"tags":["suicide-risk-form-controller"],"operationId":"getContactDocuments","requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"integer","format":"int64"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactDocumentResponse"}}}}}}},"/users/{username}/access/{crn}":{"get":{"tags":["user-access-controller"],"operationId":"checkAccess","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}},{"name":"crn","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CaseAccess"}}}}}}},"/sign-and-send/{username}":{"get":{"tags":["suicide-risk-form-controller"],"operationId":"getSignAndSend","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignAndSendResponse"}}}}}}},"/information-page/{crn}":{"get":{"tags":["suicide-risk-form-controller"],"operationId":"getInformationPage","parameters":[{"name":"crn","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InformationPageResponse"}}}}}}},"/docs/asyncapi":{"get":{"tags":["async-api-controller"],"operationId":"asyncApi","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/case/{suicideRiskFormId}":{"get":{"tags":["suicide-risk-form-controller"],"operationId":"findCrnForSuicideRiskForm","parameters":[{"name":"suicideRiskFormId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentCrn"}}}}}}},"/basic-details/{crn}":{"get":{"tags":["suicide-risk-form-controller"],"operationId":"getBasicDetails","parameters":[{"name":"crn","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BasicDetails"}}}}}}}},"components":{"schemas":{"ContactDocumentDetails":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"lastUpdated":{"type":"string","format":"date-time"},"alfrescoId":{"type":"string"}},"required":["alfrescoId","id","name"]},"ContactDocumentItem":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"documents":{"type":"array","items":{"$ref":"#/components/schemas/ContactDocumentDetails"}}},"required":["documents","id"]},"ContactDocumentResponse":{"type":"object","properties":{"content":{"type":"array","items":{"$ref":"#/components/schemas/ContactDocumentItem"}}},"required":["content"]},"CaseAccess":{"type":"object","properties":{"crn":{"type":"string"},"userExcluded":{"type":"boolean"},"userRestricted":{"type":"boolean"},"exclusionMessage":{"type":"string"},"restrictionMessage":{"type":"string"}},"required":["crn","userExcluded","userRestricted"]},"Name":{"type":"object","properties":{"forename":{"type":"string"},"middleName":{"type":"string"},"surname":{"type":"string"}},"required":["forename","surname"]},"OfficeAddress":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"status":{"type":"string"},"officeDescription":{"type":"string"},"buildingName":{"type":"string"},"buildingNumber":{"type":"string"},"streetName":{"type":"string"},"townCity":{"type":"string"},"district":{"type":"string"},"county":{"type":"string"},"postcode":{"type":"string"}},"required":["id"]},"SignAndSendResponse":{"type":"object","properties":{"name":{"$ref":"#/components/schemas/Name"},"telephoneNumber":{"type":"string"},"emailAddress":{"type":"string"},"addresses":{"type":"array","items":{"$ref":"#/components/schemas/OfficeAddress"}}},"required":["addresses","name"]},"CodedDescription":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"}},"required":["code","description"]},"InformationPageResponse":{"type":"object","properties":{"registration":{"$ref":"#/components/schemas/MostRecentRegistration"}}},"MostRecentRegistration":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"type":{"$ref":"#/components/schemas/CodedDescription"},"startDate":{"type":"string","format":"date"},"endDate":{"type":"string","format":"date"},"notes":{"type":"string"},"documentsLinked":{"type":"boolean"},"deregistered":{"type":"boolean"}},"required":["deregistered","documentsLinked","id","startDate","type"]},"DocumentCrn":{"type":"object","properties":{"crn":{"type":"string"}},"required":["crn"]},"Address":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"status":{"type":"string"},"buildingName":{"type":"string"},"buildingNumber":{"type":"string"},"streetName":{"type":"string"},"townCity":{"type":"string"},"district":{"type":"string"},"county":{"type":"string"},"postcode":{"type":"string"},"startDate":{"type":"string","format":"date"}},"required":["id"]},"BasicDetails":{"type":"object","properties":{"title":{"type":"string"},"name":{"$ref":"#/components/schemas/Name"},"addresses":{"type":"array","items":{"$ref":"#/components/schemas/Address"}},"prisonNumber":{"type":"string"},"dateOfBirth":{"type":"string","format":"date"}},"required":["addresses","dateOfBirth","name"]}},"securitySchemes":{"hmpps-auth-token":{"type":"http","name":"Authorization","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}