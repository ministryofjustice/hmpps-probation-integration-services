<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Person Search Index From Delius - HMPPS Probation Integration Services</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/person-search-index-from-delius/about.html">
      <link rel="icon" sizes="48x48" href="/images/favicon.ico">
      <link rel="icon" sizes="any" href="/images/favicon.svg" type="image/svg+xml">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="ministryofjustice.github.io" />
      <meta name="twitter:image" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/images/opengraph-image.png" />
      <meta name="twitter:title" content="Person Search Index From Delius - HMPPS Probation Integration Services" />
      <meta name="twitter:url" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/person-search-index-from-delius/about.html" />

      <meta property="og:image" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/images/opengraph-image.png" />
      <meta property="og:site_name" content="HMPPS Probation Integration Services" />
      <meta property="og:title" content="Person Search Index From Delius" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/person-search-index-from-delius/about.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          HMPPS Probation Integration
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/hmpps-probation-integration-services#readme">GitHub</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://mojdt.slack.com/archives/C02HQ4M2YQN">Slack</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="../../">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#person-search-index-from-delius"><span>Person Search Index From Delius</span></a>
    <ul>
      <li>
        <a href="#hmpps-business-need"><span>HMPPS Business Need</span></a>
      </li>
      <li>
        <a href="#hmpps-domain-mapping"><span>HMPPS Domain Mapping</span></a>
      </li>
      <li>
        <a href="#context-map-interfaces"><span>Context Map / Interfaces</span></a>
      </li>
      <li>
        <a href="#processing-pipeline"><span>Processing Pipeline</span></a>
      </li>
      <li>
        <a href="#downstream-business-functionality"><span>Downstream Business Functionality</span></a>
      </li>
      <li>
        <a href="#relevant-hmpps-domain-data-events"><span>Relevant HMPPS Domain/Data Events</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="person-search-index-from-delius">Person Search Index From Delius</h1>
<p>Outbound service that sends details of people on probation held in the Delius
database to an indexing process. The resulting index supports searching and
matching details of people on probation and makes up the core of the
<a href="https://github.com/ministryofjustice/probation-offender-search">Probation Offender Search</a>
service. The service is based on an instance of <a href="https://www.elastic.co/logstash/">Logstash</a></p>
<h2 id="hmpps-business-need">HMPPS Business Need</h2>
<p>Searching and matching records held on people on probation is needed by
multiple systems within HMPPS. This service provides full and incremental
indexing to ensure that we provide search and match capability for people on
probation using an up-to-date dataset. The index is refreshed on a
<a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/projects/person-search-index-from-delius/deploy/values-prod.yml#L5">daily schedule</a>
and incrementally updated during the working day based on Delius data events.</p>
<h2 id="hmpps-domain-mapping">HMPPS Domain Mapping</h2>
<p>The person search index contains the elements of <strong>Core Person Record</strong> that
are currently stored in the Delius database. This includes information on
their relationship with the probation service (<strong>Person OMiC/POM/COM</strong>), the
<strong>Person Location</strong> and overview data on the person&rsquo;s <strong>Sentence/Offence</strong></p>
<h2 id="context-map-interfaces">Context Map / Interfaces</h2>
<p>The service takes data from the Delius database and converts to the document
format that forms the &lsquo;offender&rsquo; response of both <a href="https://github.com/ministryofjustice/probation-offender-search">Probation Offender Search</a>
and <a href="https://github.com/ministryofjustice/community-api">Community API</a>. This
document format is the de-facto representation of the person on probation as
used by HMPPS Digital services. The data format can be seen in the response
definitions of <a href="https://probation-offender-search-dev.hmpps.service.justice.gov.uk/swagger-ui/index.html#/offender-search/search">Probation Offender Search</a></p>
<p>The mappings between the indexed document data format and the Delius database
fields are within the <a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/f014e0319e67859182415bd7cecfd948e8d76135/projects/person-search-index-from-delius/container/statement.sql">Delius database query</a>
that forms the core of the indexing process.</p>
<p>The search and match functionality of Probation Offender Search is determined
by the <a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/projects/person-search-index-from-delius/container/pipelines/person/index/person-search-template.json">index template</a>
and the <a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/projects/person-search-index-from-delius/container/pipelines/person/index/person-search-pipeline.json">indexing pipeline</a>
which together define the pre-processing and field analysis that result in a
searchable index.</p>
<h2 id="processing-pipeline">Processing Pipeline</h2>
<p><a href="../../images/person-search-index-from-delius-pipeline.png" rel="noopener noreferrer"><img src="../../images/person-search-index-from-delius-pipeline.png" alt="Processing Pipeline" /></a></p>
<h2 id="downstream-business-functionality">Downstream Business Functionality</h2>

<ul>
<li>Search of people on probation in HMPPS Digital services including NDelius</li>
<li>Matching of people within HMPPS Digital services</li>
<li>Matching of people to determine links between prison and probation systems</li>
</ul>
<h2 id="relevant-hmpps-domain-data-events">Relevant HMPPS Domain/Data Events</h2>
<p>Incremental indexing is supported by <a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/projects/offender-events-and-delius/README.md">Probation Data Events</a></p>

              <div data-module='page-expiry' data-last-reviewed-on="2025-09-24">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 24 June 2025.

        It needs to be reviewed again on 24 September 2025
        by the page owner <a href="https://mojdt.slack.com/messages/probation-integration-team">#probation-integration-team</a>
        .
    </div>

    <div class='page-expiry--expired' hidden>
      This page was set to be reviewed before 24 September 2025
       by the page owner <a href="https://mojdt.slack.com/messages/probation-integration-team">#probation-integration-team</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/doc/tech-docs/source/projects/person-search-index-from-delius/about.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/issues/new?body=Problem+with+%27Person+Search+Index+From+Delius%27+%28https%3A%2F%2Fministryofjustice.github.io%2Fhmpps-probation-integration-services%2Ftech-docs%2Fprojects%2Fperson-search-index-from-delius%2Fabout.html%29&amp;labels=bug&amp;title=Re%3A+%27Person+Search+Index+From+Delius%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/hmpps-probation-integration-services">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../../javascripts/govuk_frontend.js" type="module"></script>
    <script src="../../javascripts/application.js"></script>
  </body>
</html>
