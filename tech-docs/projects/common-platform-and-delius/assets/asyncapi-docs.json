{"asyncapi":"2.4.0","info":{"title":"common-platform-and-delius","version":"1.0","contact":{"name":"Probation Integration Team","url":"https://mojdt.slack.com/archives/C02HQ4M2YQN","email":"probation-integration-team@digital.justice.gov.uk"},"license":{"name":"MIT","url":"https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/LICENSE"}},"channels":{"common-platform-and-delius-queue":{"$ref":"#/components/channels/CourtMessageHandler"},"common-platform-and-delius-fifo-queue":{"$ref":"#/components/channels/FIFOHandler"},"hmpps-domain-events-topic":{"$ref":"#/components/channels/Notifier"}},"servers":{"dev":{"url":"https://sqs.eu-west-2.amazonaws.com/754256621582/probation-integration-dev-common-platform-and-delius-queue","protocol":"sqs"},"preprod":{"url":"https://sqs.eu-west-2.amazonaws.com/754256621582/probation-integration-preprod-common-platform-and-delius-queue","protocol":"sqs"},"prod":{"url":"https://sqs.eu-west-2.amazonaws.com/754256621582/probation-integration-prod-common-platform-and-delius-queue","protocol":"sqs"}},"defaultContentType":"application/json","components":{"schemas":{"HmppsDomainEvent":{"required":["additionalInformation","eventType","occurredAt","personReference","version"],"type":"object","properties":{"eventType":{"type":"string","exampleSetFlag":false,"types":["string"]},"version":{"type":"integer","format":"int32","exampleSetFlag":false,"types":["integer"]},"detailUrl":{"type":"string","exampleSetFlag":false,"types":["string"]},"occurredAt":{"type":"string","format":"date-time","exampleSetFlag":false,"types":["string"]},"description":{"type":"string","exampleSetFlag":false,"types":["string"]},"additionalInformation":{"type":"object","additionalProperties":{"type":"object","exampleSetFlag":false,"types":["object"],"jsonSchema":{"type":"object"}},"exampleSetFlag":false,"types":["object"],"jsonSchema":{"type":"object"}},"personReference":{"$ref":"#/components/schemas/PersonReference","exampleSetFlag":false}},"exampleSetFlag":false},"PersonIdentifier":{"required":["type","value"],"type":"object","properties":{"type":{"type":"string","exampleSetFlag":false,"types":["string"]},"value":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"PersonReference":{"required":["identifiers"],"type":"object","properties":{"identifiers":{"type":"array","exampleSetFlag":false,"items":{"$ref":"#/components/schemas/PersonIdentifier","exampleSetFlag":false},"types":["array"]}},"exampleSetFlag":false},"Address":{"type":"object","properties":{"address1":{"type":"string","exampleSetFlag":false,"types":["string"]},"address2":{"type":"string","exampleSetFlag":false,"types":["string"]},"address3":{"type":"string","exampleSetFlag":false,"types":["string"]},"address4":{"type":"string","exampleSetFlag":false,"types":["string"]},"address5":{"type":"string","exampleSetFlag":false,"types":["string"]},"postcode":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"CommonPlatformHearing":{"required":["hearing"],"type":"object","properties":{"hearing":{"$ref":"#/components/schemas/Hearing","exampleSetFlag":false}},"exampleSetFlag":false},"ContactDetails":{"type":"object","properties":{"home":{"type":"string","exampleSetFlag":false,"types":["string"]},"mobile":{"type":"string","exampleSetFlag":false,"types":["string"]},"work":{"type":"string","exampleSetFlag":false,"types":["string"]},"email":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"CourtCentre":{"required":["code","id","roomId","roomName"],"type":"object","properties":{"id":{"type":"string","exampleSetFlag":false,"types":["string"]},"code":{"type":"string","exampleSetFlag":false,"types":["string"]},"roomId":{"type":"string","exampleSetFlag":false,"types":["string"]},"roomName":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"Defendant":{"required":["id","offences","prosecutionCaseId"],"type":"object","properties":{"id":{"type":"string","exampleSetFlag":false,"types":["string"]},"offences":{"type":"array","exampleSetFlag":false,"items":{"$ref":"#/components/schemas/HearingOffence","exampleSetFlag":false},"types":["array"]},"prosecutionCaseId":{"type":"string","exampleSetFlag":false,"types":["string"]},"personDefendant":{"$ref":"#/components/schemas/PersonDefendant","exampleSetFlag":false},"legalEntityDefendant":{"type":"object","exampleSetFlag":false,"types":["object"],"jsonSchema":{"type":"object"}},"masterDefendantId":{"type":"string","exampleSetFlag":false,"types":["string"]},"pncId":{"type":"string","exampleSetFlag":false,"types":["string"]},"croNumber":{"type":"string","exampleSetFlag":false,"types":["string"]},"isYouth":{"type":"boolean","exampleSetFlag":false,"types":["boolean"]},"isPncMissing":{"type":"boolean","exampleSetFlag":false,"types":["boolean"]},"isCroMissing":{"type":"boolean","exampleSetFlag":false,"types":["boolean"]},"isYouthMissing":{"type":"boolean","exampleSetFlag":false,"types":["boolean"]},"cprUUID":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"Ethnicity":{"type":"object","properties":{"observedEthnicityDescription":{"type":"string","exampleSetFlag":false,"types":["string"]},"selfDefinedEthnicityDescription":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"Hearing":{"required":["courtCentre","hearingDays","id","jurisdictionType","prosecutionCases"],"type":"object","properties":{"id":{"type":"string","exampleSetFlag":false,"types":["string"]},"courtCentre":{"$ref":"#/components/schemas/CourtCentre","exampleSetFlag":false},"type":{"$ref":"#/components/schemas/HearingType","exampleSetFlag":false},"jurisdictionType":{"type":"string","exampleSetFlag":false,"types":["string"]},"hearingDays":{"type":"array","exampleSetFlag":false,"items":{"$ref":"#/components/schemas/HearingDay","exampleSetFlag":false},"types":["array"]},"prosecutionCases":{"type":"array","exampleSetFlag":false,"items":{"$ref":"#/components/schemas/ProsecutionCase","exampleSetFlag":false},"types":["array"]}},"exampleSetFlag":false},"HearingDay":{"required":["listedDurationMinutes","listingSequence","sittingDay"],"type":"object","properties":{"sittingDay":{"type":"string","format":"date-time","exampleSetFlag":false,"types":["string"]},"listedDurationMinutes":{"type":"integer","format":"int32","exampleSetFlag":false,"types":["integer"]},"listingSequence":{"type":"integer","format":"int32","exampleSetFlag":false,"types":["integer"]}},"exampleSetFlag":false},"HearingOffence":{"required":["id","listingNumber","offenceLegislation","offenceTitle","wording"],"type":"object","properties":{"id":{"type":"string","exampleSetFlag":false,"types":["string"]},"offenceDefinitionId":{"type":"string","exampleSetFlag":false,"types":["string"]},"offenceCode":{"type":"string","exampleSetFlag":false,"types":["string"]},"offenceTitle":{"type":"string","exampleSetFlag":false,"types":["string"]},"wording":{"type":"string","exampleSetFlag":false,"types":["string"]},"offenceLegislation":{"type":"string","exampleSetFlag":false,"types":["string"]},"listingNumber":{"type":"integer","format":"int32","exampleSetFlag":false,"types":["integer"]},"judicialResults":{"type":"array","exampleSetFlag":false,"items":{"$ref":"#/components/schemas/JudicialResult","exampleSetFlag":false},"types":["array"]},"plea":{"$ref":"#/components/schemas/Plea","exampleSetFlag":false},"verdict":{"$ref":"#/components/schemas/Verdict","exampleSetFlag":false}},"exampleSetFlag":false},"HearingType":{"required":["description","id"],"type":"object","properties":{"id":{"type":"string","exampleSetFlag":false,"types":["string"]},"description":{"type":"string","exampleSetFlag":false,"types":["string"]},"welshDescription":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"JudicialResult":{"type":"object","properties":{"isConvictedResult":{"type":"boolean","exampleSetFlag":false,"types":["boolean"]},"label":{"type":"string","exampleSetFlag":false,"types":["string"]},"judicialResultTypeId":{"type":"string","exampleSetFlag":false,"types":["string"]},"resultText":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"PersonDefendant":{"required":["personDetails"],"type":"object","properties":{"personDetails":{"$ref":"#/components/schemas/PersonDetails","exampleSetFlag":false}},"exampleSetFlag":false},"PersonDetails":{"type":"object","properties":{"gender":{"type":"string","exampleSetFlag":false,"types":["string"]},"lastName":{"type":"string","exampleSetFlag":false,"types":["string"]},"middleName":{"type":"string","exampleSetFlag":false,"types":["string"]},"firstName":{"type":"string","exampleSetFlag":false,"types":["string"]},"dateOfBirth":{"type":"string","format":"date","exampleSetFlag":false,"types":["string"]},"address":{"$ref":"#/components/schemas/Address","exampleSetFlag":false},"contact":{"$ref":"#/components/schemas/ContactDetails","exampleSetFlag":false},"ethnicity":{"$ref":"#/components/schemas/Ethnicity","exampleSetFlag":false}},"exampleSetFlag":false},"Plea":{"type":"object","properties":{"pleaValue":{"type":"string","exampleSetFlag":false,"types":["string"]},"pleaDate":{"type":"string","format":"date","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"ProsecutionCase":{"required":["caseMarkers","defendants","id","prosecutionCaseIdentifier"],"type":"object","properties":{"id":{"type":"string","exampleSetFlag":false,"types":["string"]},"initiationCode":{"type":"string","exampleSetFlag":false,"types":["string"]},"prosecutionCaseIdentifier":{"$ref":"#/components/schemas/ProsecutionCaseIdentifier","exampleSetFlag":false},"defendants":{"type":"array","exampleSetFlag":false,"items":{"$ref":"#/components/schemas/Defendant","exampleSetFlag":false},"types":["array"]},"caseStatus":{"type":"string","exampleSetFlag":false,"types":["string"]},"caseMarkers":{"type":"array","exampleSetFlag":false,"items":{"type":"object","exampleSetFlag":false,"types":["object"],"jsonSchema":{"type":"object"}},"types":["array"]}},"exampleSetFlag":false},"ProsecutionCaseIdentifier":{"required":["caseURN","prosecutionAuthorityCode","prosecutionAuthorityId"],"type":"object","properties":{"prosecutionAuthorityCode":{"type":"string","exampleSetFlag":false,"types":["string"]},"prosecutionAuthorityId":{"type":"string","exampleSetFlag":false,"types":["string"]},"caseURN":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"Verdict":{"required":["verdictType"],"type":"object","properties":{"verdictDate":{"type":"string","format":"date","exampleSetFlag":false,"types":["string"]},"verdictType":{"$ref":"#/components/schemas/VerdictType","exampleSetFlag":false}},"exampleSetFlag":false},"VerdictType":{"type":"object","properties":{"description":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false}},"channels":{"CourtMessageHandler":{},"FIFOHandler":{"publish":{"message":{"oneOf":[{"payload":{"$ref":"#/components/schemas/CommonPlatformHearing"},"name":"COMMON_PLATFORM_HEARING","title":"COMMON_PLATFORM_HEARING"}]}}},"Notifier":{"subscribe":{"message":{"oneOf":[{"payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"name":"probation-case.engagement.created","title":"probation-case.engagement.created"},{"payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"name":"probation-case.address.created","title":"probation-case.address.created"}]}}}},"messages":{"HmppsDomainEvent":{"payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"schemaFormat":"application/schema+json;version=draft-07"},"CommonPlatformHearing":{"payload":{"$ref":"#/components/schemas/CommonPlatformHearing"},"schemaFormat":"application/schema+json;version=draft-07"}}},"externalDocs":{"url":"https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/common-platform-and-delius/"}}