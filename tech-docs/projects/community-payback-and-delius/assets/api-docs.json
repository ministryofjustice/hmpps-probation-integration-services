{"openapi":"3.1.0","info":{"title":"API Reference","contact":{"name":"Probation Integration Team","url":"https://mojdt.slack.com/archives/C02HQ4M2YQN","email":"probation-integration-team@digital.justice.gov.uk"},"license":{"name":"MIT","url":"https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/LICENSE"},"version":"1.0"},"servers":[{"url":"/"}],"security":[{"hmpps-auth-token":[]}],"paths":{"/reference-data/unpaid-work-appointment-outcomes":{"get":{"tags":["reference-data-controller"],"operationId":"getUnpaidWorkAppointmentOutcomes","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CodeDescription"}}}}}}}},"/reference-data/project-types":{"get":{"tags":["reference-data-controller"],"operationId":"getProjectTypes","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CodeDescription"}}}}}}}},"/providers":{"get":{"tags":["providers-controller"],"operationId":"getProviders","parameters":[{"name":"username","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProvidersResponse"}}}}}}},"/providers/{providerCode}/teams/{teamCode}/supervisors":{"get":{"tags":["providers-controller"],"operationId":"getSupervisors","parameters":[{"name":"providerCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"teamCode","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupervisorsResponse"}}}}}}},"/providers/{providerCode}/teams/{teamCode}/sessions":{"get":{"tags":["providers-controller"],"operationId":"getSessions","parameters":[{"name":"providerCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"teamCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string","format":"date"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UnpaidWorkSessionDto"}}}}}}}},"/providers/{code}/teams":{"get":{"tags":["providers-controller"],"operationId":"getTeams","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamsResponse"}}}}}}},"/projects/{projectCode}/appointments/{appointmentId}":{"get":{"tags":["appointments-controller"],"operationId":"getAppointment","parameters":[{"name":"projectCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"appointmentId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"username","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentResponse"}}}}}}},"/docs/asyncapi":{"get":{"tags":["async-api-controller"],"operationId":"asyncApi","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"CodeDescription":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"}},"required":["code","description"]},"ProvidersResponse":{"type":"object","properties":{"providers":{"type":"array","items":{"$ref":"#/components/schemas/CodeDescription"}}},"required":["providers"]},"Name":{"type":"object","properties":{"forename":{"type":"string"},"middleName":{"type":"string"},"surname":{"type":"string"}},"required":["forename","surname"]},"Supervisor":{"type":"object","properties":{"name":{"$ref":"#/components/schemas/Name"},"code":{"type":"string"},"grade":{"$ref":"#/components/schemas/CodeDescription"}},"required":["code","name"]},"SupervisorsResponse":{"type":"object","properties":{"supervisors":{"type":"array","items":{"$ref":"#/components/schemas/Supervisor"}}},"required":["supervisors"]},"UnpaidWorkSessionDto":{"type":"object","properties":{"projectId":{"type":"integer","format":"int64"},"projectName":{"type":"string"},"projectCode":{"type":"string"},"startTime":{"type":"string"},"endTime":{"type":"string"},"appointmentDate":{"type":"string","format":"date"},"allocatedCount":{"type":"integer","format":"int64"},"outcomeCount":{"type":"integer","format":"int64"},"enforcementActionCount":{"type":"integer","format":"int64"}},"required":["allocatedCount","appointmentDate","endTime","enforcementActionCount","outcomeCount","projectCode","projectId","projectName","startTime"]},"TeamsResponse":{"type":"object","properties":{"teams":{"type":"array","items":{"$ref":"#/components/schemas/CodeDescription"}}},"required":["teams"]},"AppointmentResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"version":{"type":"string","format":"uuid"},"project":{"$ref":"#/components/schemas/AppointmentResponseProject"},"projectType":{"$ref":"#/components/schemas/NameCode"},"case":{"$ref":"#/components/schemas/AppointmentResponseCase"},"supervisor":{"$ref":"#/components/schemas/AppointmentResponseSupervisor"},"team":{"$ref":"#/components/schemas/NameCode"},"provider":{"$ref":"#/components/schemas/NameCode"},"pickUpData":{"$ref":"#/components/schemas/AppointmentResponsePickupData"},"date":{"type":"string","format":"date"},"startTime":{"type":"string"},"endTime":{"type":"string"},"penaltyHours":{"type":"string"},"outcome":{"$ref":"#/components/schemas/CodeDescription"},"enforcementAction":{"$ref":"#/components/schemas/AppointmentResponseEnforcementAction"},"hiVisWorn":{"type":"boolean"},"workedIntensively":{"type":"boolean"},"workQuality":{"type":"string"},"behaviour":{"type":"string"},"notes":{"type":"string"},"updatedAt":{"type":"string","format":"date-time"},"sensitive":{"type":"boolean"},"alertActive":{"type":"boolean"}},"required":["case","date","endTime","hiVisWorn","id","penaltyHours","pickUpData","project","projectType","provider","startTime","supervisor","team","updatedAt","version","workedIntensively"]},"AppointmentResponseAddress":{"type":"object","properties":{"streetName":{"type":"string"},"buildingName":{"type":"string"},"addressNumber":{"type":"string"},"townCity":{"type":"string"},"county":{"type":"string"},"postCode":{"type":"string"}}},"AppointmentResponseCase":{"type":"object","properties":{"crn":{"type":"string"},"name":{"$ref":"#/components/schemas/AppointmentResponseName"},"dateOfBirth":{"type":"string","format":"date"},"currentExclusion":{"type":"boolean"},"exclusionMessage":{"type":"string"},"currentRestriction":{"type":"boolean"},"restrictionMessage":{"type":"string"}},"required":["crn","currentExclusion","currentRestriction","dateOfBirth","name"]},"AppointmentResponseEnforcementAction":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"},"respondBy":{"type":"string","format":"date"}},"required":["code","description","respondBy"]},"AppointmentResponseName":{"type":"object","properties":{"forename":{"type":"string"},"surname":{"type":"string"},"middleNames":{"type":"array","items":{"type":"string"}}},"required":["forename","middleNames","surname"]},"AppointmentResponsePickupData":{"type":"object","properties":{"location":{"$ref":"#/components/schemas/AppointmentResponseAddress"},"time":{"type":"string"}},"required":["location"]},"AppointmentResponseProject":{"type":"object","properties":{"name":{"type":"string"},"code":{"type":"string"},"location":{"$ref":"#/components/schemas/AppointmentResponseAddress"}},"required":["code","name"]},"AppointmentResponseSupervisor":{"type":"object","properties":{"code":{"type":"string"},"name":{"$ref":"#/components/schemas/AppointmentResponseName"}},"required":["code","name"]},"NameCode":{"type":"object","properties":{"name":{"type":"string"},"code":{"type":"string"}},"required":["code","name"]}},"securitySchemes":{"hmpps-auth-token":{"type":"http","name":"Authorization","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}