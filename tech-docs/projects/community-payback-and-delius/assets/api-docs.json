{"openapi":"3.1.0","info":{"title":"API Reference","contact":{"name":"Probation Integration Team","url":"https://mojdt.slack.com/archives/C02HQ4M2YQN","email":"probation-integration-team@digital.justice.gov.uk"},"license":{"name":"MIT","url":"https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/LICENSE"},"version":"1.0"},"servers":[{"url":"/"}],"security":[{"hmpps-auth-token":[]}],"paths":{"/projects/{projectCode}/appointments/{appointmentId}/outcome":{"put":{"tags":["appointments-controller"],"operationId":"updateAppointmentOutcome","parameters":[{"name":"projectCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"appointmentId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentOutcomeRequest"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/reference-data/unpaid-work-appointment-outcomes":{"get":{"tags":["reference-data-controller"],"operationId":"getUnpaidWorkAppointmentOutcomes","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CodeDescription"}}}}}}}},"/reference-data/project-types":{"get":{"tags":["reference-data-controller"],"operationId":"getProjectTypes","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CodeDescription"}}}}}}}},"/providers":{"get":{"tags":["providers-controller"],"operationId":"getProviders","parameters":[{"name":"username","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProvidersResponse"}}}}}}},"/providers/{providerCode}/teams/{teamCode}/supervisors":{"get":{"tags":["providers-controller"],"operationId":"getSupervisors","parameters":[{"name":"providerCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"teamCode","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupervisorsResponse"}}}}}}},"/providers/{providerCode}/teams/{teamCode}/sessions":{"get":{"tags":["providers-controller"],"operationId":"getSessions","parameters":[{"name":"providerCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"teamCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string","format":"date"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionsResponse"}}}}}}},"/providers/{code}/teams":{"get":{"tags":["providers-controller"],"operationId":"getTeams","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamsResponse"}}}}}}},"/projects/{projectCode}/appointments":{"get":{"tags":["appointments-controller"],"operationId":"getSession","parameters":[{"name":"projectCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"date","in":"query","required":true,"schema":{"type":"string","format":"date"}},{"name":"username","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionResponse"}}}}}}},"/projects/{projectCode}/appointments/{appointmentId}":{"get":{"tags":["appointments-controller"],"operationId":"getAppointment","parameters":[{"name":"projectCode","in":"path","required":true,"schema":{"type":"string"}},{"name":"appointmentId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"username","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentResponse"}}}}}}},"/docs/asyncapi":{"get":{"tags":["async-api-controller"],"operationId":"asyncApi","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"AppointmentOutcomeRequest":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"version":{"type":"string","format":"uuid"},"outcome":{"$ref":"#/components/schemas/Code"},"supervisor":{"$ref":"#/components/schemas/Code"},"startTime":{"type":"string"},"endTime":{"type":"string"},"notes":{"type":"string"},"hiVisWorn":{"type":"boolean"},"workedIntensively":{"type":"boolean"},"penaltyMinutes":{"type":"integer","format":"int64"},"workQuality":{"type":"string","enum":["EXCELLENT","GOOD","NOT_APPLICABLE","POOR","SATISFACTORY","UNSATISFACTORY"]},"behaviour":{"type":"string","enum":["EXCELLENT","GOOD","NOT_APPLICABLE","POOR","SATISFACTORY","UNSATISFACTORY"]},"sensitive":{"type":"boolean"},"alertActive":{"type":"boolean"}},"required":["endTime","id","startTime","supervisor","version"]},"Code":{"type":"object","properties":{"code":{"type":"string"}},"required":["code"]},"CodeDescription":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"}},"required":["code","description"]},"ProvidersResponse":{"type":"object","properties":{"providers":{"type":"array","items":{"$ref":"#/components/schemas/CodeDescription"}}},"required":["providers"]},"Name":{"type":"object","properties":{"forename":{"type":"string"},"middleName":{"type":"string"},"surname":{"type":"string"}},"required":["forename","surname"]},"Supervisor":{"type":"object","properties":{"name":{"$ref":"#/components/schemas/Name"},"code":{"type":"string"},"grade":{"$ref":"#/components/schemas/CodeDescription"}},"required":["code","name"]},"SupervisorsResponse":{"type":"object","properties":{"supervisors":{"type":"array","items":{"$ref":"#/components/schemas/Supervisor"}}},"required":["supervisors"]},"SessionsResponse":{"type":"object","properties":{"sessions":{"type":"array","items":{"$ref":"#/components/schemas/UnpaidWorkSession"}}},"required":["sessions"]},"UnpaidWorkSession":{"type":"object","properties":{"project":{"$ref":"#/components/schemas/CodeDescription"},"date":{"type":"string","format":"date"},"allocatedCount":{"type":"integer","format":"int64"},"outcomeCount":{"type":"integer","format":"int64"},"enforcementActionCount":{"type":"integer","format":"int64"}},"required":["allocatedCount","date","enforcementActionCount","outcomeCount","project"]},"TeamsResponse":{"type":"object","properties":{"teams":{"type":"array","items":{"$ref":"#/components/schemas/CodeDescription"}}},"required":["teams"]},"AppointmentResponseAddress":{"type":"object","properties":{"streetName":{"type":"string"},"buildingName":{"type":"string"},"addressNumber":{"type":"string"},"townCity":{"type":"string"},"county":{"type":"string"},"postCode":{"type":"string"}}},"AppointmentResponseCase":{"type":"object","properties":{"crn":{"type":"string"},"name":{"$ref":"#/components/schemas/AppointmentResponseName"},"dateOfBirth":{"type":"string","format":"date"},"currentExclusion":{"type":"boolean"},"exclusionMessage":{"type":"string"},"currentRestriction":{"type":"boolean"},"restrictionMessage":{"type":"string"}},"required":["crn","currentExclusion","currentRestriction","dateOfBirth","name"]},"AppointmentResponseName":{"type":"object","properties":{"forename":{"type":"string"},"surname":{"type":"string"},"middleNames":{"type":"array","items":{"type":"string"}}},"required":["forename","middleNames","surname"]},"SessionResponse":{"type":"object","properties":{"project":{"$ref":"#/components/schemas/SessionResponseProject"},"appointmentSummaries":{"type":"array","items":{"$ref":"#/components/schemas/SessionResponseAppointmentSummary"}}},"required":["appointmentSummaries","project"]},"SessionResponseAppointmentSummary":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"case":{"$ref":"#/components/schemas/AppointmentResponseCase"},"outcome":{"$ref":"#/components/schemas/CodeDescription"},"requirementProgress":{"$ref":"#/components/schemas/UpwMinutes"}},"required":["case","id","requirementProgress"]},"SessionResponseProject":{"type":"object","properties":{"name":{"type":"string"},"code":{"type":"string"},"location":{"$ref":"#/components/schemas/AppointmentResponseAddress"}},"required":["code","name"]},"UpwMinutes":{"type":"object","properties":{"requiredMinutes":{"type":"integer","format":"int64"},"completedMinutes":{"type":"integer","format":"int64"}},"required":["completedMinutes","requiredMinutes"]},"AppointmentResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"version":{"type":"string","format":"uuid"},"project":{"$ref":"#/components/schemas/AppointmentResponseProject"},"projectType":{"$ref":"#/components/schemas/NameCode"},"case":{"$ref":"#/components/schemas/AppointmentResponseCase"},"supervisor":{"$ref":"#/components/schemas/AppointmentResponseSupervisor"},"team":{"$ref":"#/components/schemas/NameCode"},"provider":{"$ref":"#/components/schemas/NameCode"},"pickUpData":{"$ref":"#/components/schemas/AppointmentResponsePickupData"},"date":{"type":"string","format":"date"},"startTime":{"type":"string"},"endTime":{"type":"string"},"penaltyHours":{"type":"string"},"outcome":{"$ref":"#/components/schemas/CodeDescription"},"enforcementAction":{"$ref":"#/components/schemas/AppointmentResponseEnforcementAction"},"hiVisWorn":{"type":"boolean"},"workedIntensively":{"type":"boolean"},"workQuality":{"type":"string","enum":["EXCELLENT","GOOD","NOT_APPLICABLE","POOR","SATISFACTORY","UNSATISFACTORY"]},"behaviour":{"type":"string","enum":["EXCELLENT","GOOD","NOT_APPLICABLE","POOR","SATISFACTORY","UNSATISFACTORY"]},"notes":{"type":"string"},"updatedAt":{"type":"string","format":"date-time"},"sensitive":{"type":"boolean"},"alertActive":{"type":"boolean"}},"required":["case","date","endTime","id","penaltyHours","pickUpData","project","projectType","provider","startTime","supervisor","team","updatedAt","version"]},"AppointmentResponseEnforcementAction":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"},"respondBy":{"type":"string","format":"date"}},"required":["code","description"]},"AppointmentResponsePickupData":{"type":"object","properties":{"location":{"$ref":"#/components/schemas/AppointmentResponseAddress"},"time":{"type":"string"}},"required":["location"]},"AppointmentResponseProject":{"type":"object","properties":{"name":{"type":"string"},"code":{"type":"string"},"location":{"$ref":"#/components/schemas/AppointmentResponseAddress"},"hiVisRequired":{"type":"boolean"}},"required":["code","hiVisRequired","name"]},"AppointmentResponseSupervisor":{"type":"object","properties":{"code":{"type":"string"},"name":{"$ref":"#/components/schemas/AppointmentResponseName"}},"required":["code","name"]},"NameCode":{"type":"object","properties":{"name":{"type":"string"},"code":{"type":"string"}},"required":["code","name"]}},"securitySchemes":{"hmpps-auth-token":{"type":"http","name":"Authorization","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}