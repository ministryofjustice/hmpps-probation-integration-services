{"openapi":"3.1.0","info":{"title":"API Reference","contact":{"name":"Probation Integration Team","url":"https://mojdt.slack.com/archives/C02HQ4M2YQN","email":"probation-integration-team@digital.justice.gov.uk"},"license":{"name":"MIT","url":"https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/LICENSE"},"version":"1.0"},"servers":[{"url":"/"}],"security":[{"hmpps-auth-token":[]}],"paths":{"/docs/asyncapi":{"get":{"tags":["async-api-controller"],"operationId":"asyncApi","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/case-records/{identifier}":{"get":{"tags":["probation-record-resource"],"summary":"Background information on the probation case","description":"<p>Background details of the probation case for the purposes\n            of allocating a new Prison Offender Manager. The service will return\n            case information for either the CRN or NOMS number supplied in the\n            request.</p>\n            <p>Requires `PROBATION_API__MANAGE_POM_CASES__CASE_DETAIL`.</p>\n        ","operationId":"handle","parameters":[{"name":"identifier","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProbationRecord"}}}},"404":{"description":"No probation case found with the given identifier.\n                    For a prison identifier this could mean the Prison and Probation cases\n                    have not been linked yet.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/case-records/{crn}/risks/mappa":{"get":{"tags":["mappa-resource"],"operationId":"getMappaDetails","parameters":[{"name":"crn","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MappaDetail"}}}}}}}},"components":{"schemas":{"ErrorResponse":{"type":"object","properties":{"status":{"type":"integer","format":"int32"},"message":{"type":"string"},"fields":{"type":"array","items":{"$ref":"#/components/schemas/FieldError"}}},"required":["status"]},"FieldError":{"type":"object","properties":{"type":{"type":"string"},"message":{"type":"string"},"field":{"type":"string"}}},"LocalDeliveryUnit":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"}},"required":["code","description"]},"Manager":{"type":"object","properties":{"team":{"$ref":"#/components/schemas/Team"},"code":{"type":"string"},"name":{"$ref":"#/components/schemas/Name"},"email":{"type":"string"}},"required":["team"]},"Name":{"type":"object","properties":{"forename":{"type":"string"},"surname":{"type":"string"}},"required":["forename","surname"]},"ProbationRecord":{"type":"object","properties":{"crn":{"type":"string"},"nomsId":{"type":"string"},"currentTier":{"type":"string"},"resourcing":{"type":"string","enum":["ENHANCED","NORMAL"]},"manager":{"$ref":"#/components/schemas/Manager"},"mappaLevel":{"type":"integer","format":"int32"},"vloAssigned":{"type":"boolean"}},"required":["crn","manager","mappaLevel","vloAssigned"]},"Team":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"},"localDeliveryUnit":{"$ref":"#/components/schemas/LocalDeliveryUnit"}},"required":["code","description"]},"MappaDetail":{"type":"object","properties":{"level":{"type":"integer","format":"int32","description":"MAPPA Level (0=unknown). If the level is unknown due to an unrecognised Delius MAPPA level code (e.g. one not used anymore) the original Delius level description will still be returned","enum":["0,1,2,3"],"example":1},"levelDescription":{"type":"string","description":"MAPPA Level Description","example":"MAPPA Level 1"},"category":{"type":"integer","format":"int32","description":"MAPPA Category (0 = unknown). If the category is unknown due to an unrecognised Delius MAPPA category code (e.g. one not used anymore) the original Delius category  description will still be returned","enum":["0,1,2,3"],"example":3},"categoryDescription":{"type":"string","description":"MAPPA Category Description","example":"MAPPA Cat 1"},"startDate":{"type":"string","format":"date","description":"Start date","example":"2021-01-27"},"reviewDate":{"type":"string","format":"date","description":"Next review date","example":"2021-04-27"}},"required":["startDate"]}},"securitySchemes":{"hmpps-auth-token":{"type":"http","name":"Authorization","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}