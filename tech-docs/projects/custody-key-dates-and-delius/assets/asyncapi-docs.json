{"asyncapi":"2.4.0","info":{"title":"custody-key-dates-and-delius","version":"1.0","description":"Reflect changes to custody key dates in Delius","contact":{"name":"Probation Integration Team","url":"https://mojdt.slack.com/archives/C02HQ4M2YQN","email":"probation-integration-team@digital.justice.gov.uk"},"license":{"name":"MIT","url":"https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/LICENSE"}},"channels":{"custody-key-dates-and-delius-queue":{"$ref":"#/components/channels/Handler"},"hmpps-domain-events-topic":{"$ref":"#/components/channels/Notifier"}},"servers":{"dev":{"url":"https://sqs.eu-west-2.amazonaws.com/754256621582/probation-integration-dev-custody-key-dates-and-delius-queue","protocol":"sqs"},"preprod":{"url":"https://sqs.eu-west-2.amazonaws.com/754256621582/probation-integration-preprod-custody-key-dates-and-delius-queue","protocol":"sqs"},"prod":{"url":"https://sqs.eu-west-2.amazonaws.com/754256621582/probation-integration-prod-custody-key-dates-and-delius-queue","protocol":"sqs"}},"defaultContentType":"application/json","components":{"schemas":{"HmppsDomainEvent":{"required":["additionalInformation","eventType","occurredAt","personReference","version"],"type":"object","properties":{"eventType":{"type":"string","exampleSetFlag":false,"types":["string"]},"version":{"type":"integer","format":"int32","exampleSetFlag":false,"types":["integer"]},"detailUrl":{"type":"string","exampleSetFlag":false,"types":["string"]},"occurredAt":{"type":"string","format":"date-time","exampleSetFlag":false,"types":["string"]},"description":{"type":"string","exampleSetFlag":false,"types":["string"]},"additionalInformation":{"type":"object","additionalProperties":{"type":"object","exampleSetFlag":false,"types":["object"],"jsonSchema":{"type":"object"}},"exampleSetFlag":false,"types":["object"],"jsonSchema":{"type":"object"}},"personReference":{"$ref":"#/components/schemas/PersonReference","exampleSetFlag":false}},"exampleSetFlag":false},"PersonIdentifier":{"required":["type","value"],"type":"object","properties":{"type":{"type":"string","exampleSetFlag":false,"types":["string"]},"value":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false},"PersonReference":{"required":["identifiers"],"type":"object","properties":{"identifiers":{"type":"array","exampleSetFlag":false,"items":{"$ref":"#/components/schemas/PersonIdentifier","exampleSetFlag":false},"types":["array"]}},"exampleSetFlag":false},"CustodyDateChanged":{"required":["bookingId"],"type":"object","properties":{"bookingId":{"type":"integer","format":"int64","exampleSetFlag":false,"types":["integer"]}},"exampleSetFlag":false},"ProbationOffenderEvent":{"required":["crn"],"type":"object","properties":{"crn":{"type":"string","exampleSetFlag":false,"types":["string"]}},"exampleSetFlag":false}},"channels":{"Handler":{"publish":{"message":{"oneOf":[{"payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"name":"probation-case.prison-identifier.added","title":"probation-case.prison-identifier.added"},{"payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"name":"probation-case.prison-identifier.updated","title":"probation-case.prison-identifier.updated"},{"payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"name":"SENTENCE_DATES-CHANGED","title":"SENTENCE_DATES-CHANGED"},{"payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"name":"CONFIRMED_RELEASE_DATE-CHANGED","title":"CONFIRMED_RELEASE_DATE-CHANGED"},{"payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"name":"KEY_DATE_ADJUSTMENT_UPSERTED","title":"KEY_DATE_ADJUSTMENT_UPSERTED"},{"payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"name":"KEY_DATE_ADJUSTMENT_DELETED","title":"KEY_DATE_ADJUSTMENT_DELETED"},{"payload":{"$ref":"#/components/schemas/ProbationOffenderEvent"},"name":"SENTENCE_CHANGED","title":"SENTENCE_CHANGED"},{"payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"name":"custody-key-dates.internal.bulk-update","title":"custody-key-dates.internal.bulk-update","summary":"Internal use - bulk key date update"}]}}},"Notifier":{"subscribe":{"message":{"oneOf":[{"payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"name":"custody-key-dates.internal.bulk-update","title":"custody-key-dates.internal.bulk-update"}]}}}},"messages":{"HmppsDomainEvent":{"payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"schemaFormat":"application/schema+json;version=draft-07"},"CustodyDateChanged":{"payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"schemaFormat":"application/schema+json;version=draft-07"},"ProbationOffenderEvent":{"payload":{"$ref":"#/components/schemas/ProbationOffenderEvent"},"schemaFormat":"application/schema+json;version=draft-07"}}},"externalDocs":{"url":"https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/custody-key-dates-and-delius/"}}