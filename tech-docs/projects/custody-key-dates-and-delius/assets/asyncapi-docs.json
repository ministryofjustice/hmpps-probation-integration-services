{"asyncapi":"2.4.0","channels":{"custody-key-dates-and-delius-queue":{"$ref":"#/components/channels/Handler"},"hmpps-domain-events-topic":{"$ref":"#/components/channels/Notifier"}},"components":{"channels":{"Handler":{"publish":{"message":{"oneOf":[{"name":"probation-case.prison-identifier.added","payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"title":"probation-case.prison-identifier.added"},{"name":"probation-case.prison-identifier.updated","payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"title":"probation-case.prison-identifier.updated"},{"name":"SENTENCE_DATES-CHANGED","payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"title":"SENTENCE_DATES-CHANGED"},{"name":"CONFIRMED_RELEASE_DATE-CHANGED","payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"title":"CONFIRMED_RELEASE_DATE-CHANGED"},{"name":"KEY_DATE_ADJUSTMENT_UPSERTED","payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"title":"KEY_DATE_ADJUSTMENT_UPSERTED"},{"name":"KEY_DATE_ADJUSTMENT_DELETED","payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"title":"KEY_DATE_ADJUSTMENT_DELETED"},{"name":"SENTENCE_CHANGED","payload":{"$ref":"#/components/schemas/ProbationOffenderEvent"},"title":"SENTENCE_CHANGED"},{"name":"custody-key-dates.internal.bulk-update","payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"summary":"Internal use - bulk key date update","title":"custody-key-dates.internal.bulk-update"}]}}},"Notifier":{"subscribe":{"message":{"oneOf":[{"name":"custody-key-dates.internal.bulk-update","payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"title":"custody-key-dates.internal.bulk-update"}]}}}},"messages":{"HmppsDomainEvent":{"payload":{"$ref":"#/components/schemas/HmppsDomainEvent"},"schemaFormat":"application/schema+json;version=draft-07"},"CustodyDateChanged":{"payload":{"$ref":"#/components/schemas/CustodyDateChanged"},"schemaFormat":"application/schema+json;version=draft-07"},"ProbationOffenderEvent":{"payload":{"$ref":"#/components/schemas/ProbationOffenderEvent"},"schemaFormat":"application/schema+json;version=draft-07"}},"schemas":{"HmppsDomainEvent":{"exampleSetFlag":false,"properties":{"eventType":{"exampleSetFlag":false,"type":"string","types":["string"]},"version":{"exampleSetFlag":false,"format":"int32","type":"integer","types":["integer"]},"detailUrl":{"exampleSetFlag":false,"type":"string","types":["string"]},"occurredAt":{"exampleSetFlag":false,"format":"date-time","type":"string","types":["string"]},"description":{"exampleSetFlag":false,"type":"string","types":["string"]},"additionalInformation":{"additionalProperties":{"exampleSetFlag":false,"jsonSchema":{"type":"object"},"type":"object","types":["object"]},"exampleSetFlag":false,"jsonSchema":{"type":"object"},"type":"object","types":["object"]},"personReference":{"exampleSetFlag":false}},"required":["additionalInformation","eventType","occurredAt","personReference","version"],"type":"object"},"PersonIdentifier":{"exampleSetFlag":false,"properties":{"type":{"exampleSetFlag":false,"type":"string","types":["string"]},"value":{"exampleSetFlag":false,"type":"string","types":["string"]}},"required":["type","value"],"type":"object"},"PersonReference":{"exampleSetFlag":false,"properties":{"identifiers":{"exampleSetFlag":false,"items":{"exampleSetFlag":false},"type":"array","types":["array"]}},"required":["identifiers"],"type":"object"},"CustodyDateChanged":{"exampleSetFlag":false,"properties":{"bookingId":{"exampleSetFlag":false,"format":"int64","type":"integer","types":["integer"]}},"required":["bookingId"],"type":"object"},"ProbationOffenderEvent":{"exampleSetFlag":false,"properties":{"crn":{"exampleSetFlag":false,"type":"string","types":["string"]}},"required":["crn"],"type":"object"}}},"defaultContentType":"application/json","externalDocs":{"url":"https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/custody-key-dates-and-delius/"},"info":{"contact":{"email":"probation-integration-team@digital.justice.gov.uk","name":"Probation Integration Team","url":"https://mojdt.slack.com/archives/C02HQ4M2YQN"},"description":"Reflect changes to custody key dates in Delius","license":{"name":"MIT","url":"https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/LICENSE"},"title":"custody-key-dates-and-delius","version":"1.0"},"servers":{"dev":{"protocol":"sqs","url":"https://sqs.eu-west-2.amazonaws.com/754256621582/probation-integration-dev-custody-key-dates-and-delius-queue"},"preprod":{"protocol":"sqs","url":"https://sqs.eu-west-2.amazonaws.com/754256621582/probation-integration-preprod-custody-key-dates-and-delius-queue"},"prod":{"protocol":"sqs","url":"https://sqs.eu-west-2.amazonaws.com/754256621582/probation-integration-prod-custody-key-dates-and-delius-queue"}}}