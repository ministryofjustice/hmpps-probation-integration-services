<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>CAS3 and Delius - HMPPS Probation Integration Services</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/cas3-and-delius/about.html">
      <link rel="icon" sizes="48x48" href="/images/favicon.ico">
      <link rel="icon" sizes="any" href="/images/favicon.svg" type="image/svg+xml">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="ministryofjustice.github.io" />
      <meta name="twitter:image" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/images/opengraph-image.png" />
      <meta name="twitter:title" content="CAS3 and Delius - HMPPS Probation Integration Services" />
      <meta name="twitter:url" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/cas3-and-delius/about.html" />

      <meta property="og:image" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/images/opengraph-image.png" />
      <meta property="og:site_name" content="HMPPS Probation Integration Services" />
      <meta property="og:title" content="CAS3 and Delius" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs/projects/cas3-and-delius/about.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          HMPPS Probation Integration
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" hidden>Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/hmpps-probation-integration-services#readme">GitHub</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://mojdt.slack.com/archives/C02HQ4M2YQN">Slack</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1">
              <div class="search" data-module="search" data-path-to-site-root="../../">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://ministryofjustice.github.io/hmpps-probation-integration-services/tech-docs"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input
      type="search"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#cas3-and-delius"><span>CAS3 and Delius</span></a>
    <ul>
      <li>
        <a href="#business-need"><span>Business Need</span></a>
      </li>
      <li>
        <a href="#context-map"><span>Context Map</span></a>
      </li>
      <li>
        <a href="#workflows"><span>Workflows</span></a>
        <ul>
          <li>
            <a href="#transitional-accommodation-referral-application"><span>Transitional Accommodation Referral Application</span></a>
          </li>
          <li>
            <a href="#transitional-accommodation-booking"><span>Transitional Accommodation Booking</span></a>
          </li>
          <li>
            <a href="#transitional-accommodation-booking-update"><span>Transitional Accommodation Booking Update</span></a>
          </li>
          <li>
            <a href="#transitional-accommodation-residence"><span>Transitional Accommodation Residence</span></a>
          </li>
          <li>
            <a href="#transitional-accommodation-residence-update"><span>Transitional Accommodation Residence Update</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#interfaces"><span>Interfaces</span></a>
        <ul>
          <li>
            <a href="#message-interface"><span>Message Interface</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#api-reference"><span>API Reference</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="cas3-and-delius">CAS3 and Delius</h1>
<p>Service that responds to Community Accommodation Services Tier 3 (CAS3) domain events. The service is responsible for updating Delius with progress of referrals to transitional accommodation for people released from custody without a home.</p>
<h2 id="business-need">Business Need</h2>
<p>Ensuring the Probation Practitioner has an up-to-date view of activity in the CAS3 service when interacting with the probation case via Delius.</p>
<h2 id="context-map">Context Map</h2>
<p><a href="../../images/cas3-and-delius-context-map.svg" rel="noopener noreferrer"><img src="../../images/cas3-and-delius-context-map.svg" alt="Context Map" /></a></p>
<h2 id="workflows">Workflows</h2>
<p>CAS3 domain events are raised in real time as transitional accommodation referral applications, bookings and residencies are processed in the CAS3 application.</p>
<h3 id="transitional-accommodation-referral-application">Transitional Accommodation Referral Application</h3>
<p>A referral application is created in the CAS3 service which is reflected in a Delius contact. An <code>EXTERNAL_REFERENCE</code> URN is added to the contact in the form <code>urn:hmpps:cas3:application-submitted:{applicationId}</code> using the CAS3 application ID as a unique reference.</p>
<div class="table-container">
        <table>
          <tr>
<th>Business Event</th>
<th>Message Event Type / Filter</th>
</tr><tr>
<td>Submission of a accommodation referral application</td>
<td>accommodation.cas3.referral.submitted</td>
</tr>
        </table>
      </div><p><a href="../../images/cas3-and-delius-workflow-application.svg" rel="noopener noreferrer"><img src="../../images/cas3-and-delius-workflow-application.svg" alt="Context Map" /></a></p>
<h3 id="transitional-accommodation-booking">Transitional Accommodation Booking</h3>
<p>Accommodation booking activity in the CAS3 service is reflected in a set of Delius contacts representing the progress of the booking. An <code>EXTERNAL_REFERENCE</code> URN is added to the contact in the form <code>urn:hmpps:cas3:booking-{action}:{referralId}</code> using the CAS3 booking ID as a unique reference. Domain events indicating an update to a particular booking activity will find and update the relevant contact identified by the external reference URN.</p>
<div class="table-container">
        <table>
          <tr>
<th>Business Event</th>
<th>Message Event Type / Filter</th>
</tr><tr>
<td>Creation of a provisional accommodation booking</td>
<td>accommodation.cas3.booking.provisionally-made</td>
</tr><tr>
<td>Confirmation of an accommodation booking</td>
<td>accommodation.cas3.booking.confirmed</td>
</tr><tr>
<td>Cancellation of an accommodation booking</td>
<td>accommodation.cas3.booking.cancelled</td>
</tr>
        </table>
      </div><p><a href="../../images/cas3-and-delius-workflow-booking.svg" rel="noopener noreferrer"><img src="../../images/cas3-and-delius-workflow-booking.svg" alt="Context Map" /></a></p>
<h3 id="transitional-accommodation-booking-update">Transitional Accommodation Booking Update</h3>
<p>Updates to accommodation bookings in the CAS3 service are reflected in the Delius contacts previously created to represent the activity. Upon receiving an update event the integration service will find and update the relevant contact identified by the external reference URN.</p>
<div class="table-container">
        <table>
          <tr>
<th>Business Event</th>
<th>Message Event Type / Filter</th>
</tr><tr>
<td>An update to the details of an accommodation booking cancellation</td>
<td>accommodation.cas3.booking.cancelled.updated</td>
</tr>
        </table>
      </div><p><a href="../../images/cas3-and-delius-workflow-booking-update.svg" rel="noopener noreferrer"><img src="../../images/cas3-and-delius-workflow-booking-update.svg" alt="Context Map" /></a></p>
<h3 id="transitional-accommodation-residence">Transitional Accommodation Residence</h3>
<p>The CAS3 application will raise domain events with details of arrivals and departures from transitional accommodation premises. An <code>EXTERNAL_REFERENCE</code> URN is added to the contact in the form <code>urn:hmpps:cas3:person-{action}:{referralId}</code> using the CAS3 booking ID as a unique reference. The person&rsquo;s main address is updated to reflect their movement into or out of transitional accommodation.</p>
<div class="table-container">
        <table>
          <tr>
<th>Business Event</th>
<th>Message Event Type / Filter</th>
</tr><tr>
<td>Arrival at transitional accommodation</td>
<td>accommodation.cas3.person.arrived</td>
</tr><tr>
<td>Departure from transitional accommodation</td>
<td>accommodation.cas3.person.departed</td>
</tr>
        </table>
      </div><p><a href="../../images/cas3-and-delius-workflow-accommodation.svg" rel="noopener noreferrer"><img src="../../images/cas3-and-delius-workflow-accommodation.svg" alt="Context Map" /></a></p>
<h3 id="transitional-accommodation-residence-update">Transitional Accommodation Residence Update</h3>
<p>The CAS3 application will raise domain events when details of arrivals and departures from transitional accommodation premises are changed. Upon receiving an update event the integration service will find and update the relevant contact identified by the external reference URN.</p>
<div class="table-container">
        <table>
          <tr>
<th>Business Event</th>
<th>Message Event Type / Filter</th>
</tr><tr>
<td>Update to transitional accommodation arrival details</td>
<td>accommodation.cas3.person.arrived.updated</td>
</tr><tr>
<td>Update to transitional accommodation departure details</td>
<td>accommodation.cas3.person.departed.updated</td>
</tr>
        </table>
      </div><p><a href="../../images/cas3-and-delius-workflow-accommodation-update.svg" rel="noopener noreferrer"><img src="../../images/cas3-and-delius-workflow-accommodation-update.svg" alt="Context Map" /></a></p>
<h2 id="interfaces">Interfaces</h2>
<h3 id="message-interface">Message Interface</h3>
<p>The service responds to HMPPS Domain Event messages via the
<a href="https://github.com/ministryofjustice/cloud-platform-environments/blob/main/namespaces/live.cloud-platform.service.justice.gov.uk/hmpps-probation-integration-services-prod/resources/cas3-and-delius-queue.tf">Queue</a>.
The events are raised by the <a href="https://github.com/ministryofjustice/hmpps-approved-premises-api/">HMPPS Approved Premises API</a> which handles backend integration for the <a href="https://github.com/ministryofjustice/hmpps-temporary-accommodation-ui/">CAS3 UI</a></p>
<p>Example <a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/projects/cas3-and-delius/src/dev/resources/messages/">messages</a> are in the development source tree.</p>
<p>Incoming messages are filtered on <code>eventType</code> by the <a href="https://github.com/ministryofjustice/cloud-platform-environments/blob/be6588c3e9cfdd4f3e7cfb4c96ddb38591075c8d/namespaces/live.cloud-platform.service.justice.gov.uk/hmpps-probation-integration-services-prod/resources/cas3-and-delius-queue.tf#L5-L17">SQS queue policy</a></p>
<h2 id="api-reference">API Reference</h2>

<ul>
<li><a href="asyncapi-reference.html">AsyncAPI Reference</a></li>
</ul>

              <div data-module='page-expiry' data-last-reviewed-on="2026-01-27">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 27 October 2025.

        It needs to be reviewed again on 27 January 2026
        by the page owner <a href="https://mojdt.slack.com/messages/probation-integration-team">#probation-integration-team</a>
        .
    </div>

    <div class='page-expiry--expired' hidden>
      This page was set to be reviewed before 27 January 2026
       by the page owner <a href="https://mojdt.slack.com/messages/probation-integration-team">#probation-integration-team</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/doc/tech-docs/source/projects/cas3-and-delius/about.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/hmpps-probation-integration-services/issues/new?body=Problem+with+%27CAS3+and+Delius%27+%28https%3A%2F%2Fministryofjustice.github.io%2Fhmpps-probation-integration-services%2Ftech-docs%2Fprojects%2Fcas3-and-delius%2Fabout.html%29&amp;labels=bug&amp;title=Re%3A+%27CAS3+and+Delius%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/hmpps-probation-integration-services">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >Â© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../../javascripts/govuk_frontend.js" type="module"></script>
    <script src="../../javascripts/application.js"></script>
  </body>
</html>
