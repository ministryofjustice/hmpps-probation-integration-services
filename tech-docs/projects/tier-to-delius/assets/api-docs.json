{"openapi":"3.1.0","info":{"title":"API Reference","contact":{"name":"Probation Integration Team","url":"https://mojdt.slack.com/archives/C02HQ4M2YQN","email":"probation-integration-team@digital.justice.gov.uk"},"license":{"name":"MIT","url":"https://github.com/ministryofjustice/hmpps-probation-integration-services/blob/main/LICENSE"},"version":"1.0"},"servers":[{"url":"/"}],"security":[{"hmpps-auth-token":[]}],"paths":{"/users/{username}/access/{crn}":{"get":{"tags":["user-controller"],"operationId":"userAccessCheck","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}},{"name":"crn","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CaseAccess"}}}}}}},"/tier-details/{crn}":{"get":{"tags":["tier-context-controller"],"operationId":"tierContext","parameters":[{"name":"crn","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TierDetails"}}}}}}},"/probation-cases":{"get":{"tags":["crn-resource"],"operationId":"findAllActiveCrns","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}}}},"/person/{crn}":{"get":{"tags":["person-controller"],"operationId":"personDetails","parameters":[{"name":"crn","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PersonDetails"}}}}}}},"/docs/asyncapi":{"get":{"tags":["async-api-controller"],"operationId":"asyncApi","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"CaseAccess":{"type":"object","properties":{"crn":{"type":"string"},"userExcluded":{"type":"boolean"},"userRestricted":{"type":"boolean"},"exclusionMessage":{"type":"string"},"restrictionMessage":{"type":"string"}},"required":["crn","userExcluded","userRestricted"]},"Conviction":{"type":"object","properties":{"terminationDate":{"type":"string","format":"date"},"sentenceTypeCode":{"type":"string"},"breached":{"type":"boolean"},"requirements":{"type":"array","items":{"$ref":"#/components/schemas/Requirement"}}},"required":["breached","requirements"]},"Registration":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"},"level":{"type":"string"},"date":{"type":"string","format":"date"}},"required":["code","date","description"]},"Requirement":{"type":"object","properties":{"mainCategoryTypeCode":{"type":"string"},"restrictive":{"type":"boolean"}},"required":["mainCategoryTypeCode","restrictive"]},"TierDetails":{"type":"object","properties":{"gender":{"type":"string"},"currentTier":{"type":"string"},"oGRSScore":{"type":"integer","format":"int64","writeOnly":true},"rSRScore":{"type":"number","format":"double","writeOnly":true},"registrations":{"type":"array","items":{"$ref":"#/components/schemas/Registration"}},"convictions":{"type":"array","items":{"$ref":"#/components/schemas/Conviction"}},"previousEnforcementActivity":{"type":"boolean"},"ogrsscore":{"type":"integer","format":"int64"},"rsrscore":{"type":"number","format":"double"}},"required":["convictions","gender","previousEnforcementActivity","registrations"]},"Name":{"type":"object","properties":{"forenames":{"type":"string"},"surname":{"type":"string"}},"required":["forenames","surname"]},"PersonDetails":{"type":"object","properties":{"crn":{"type":"string"},"name":{"$ref":"#/components/schemas/Name"}},"required":["crn","name"]}},"securitySchemes":{"hmpps-auth-token":{"type":"http","name":"Authorization","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}