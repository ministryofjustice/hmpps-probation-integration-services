name: Projects
# Accept a list of one or more projects, the string "All", or the string "Changed", and output a JSON array of project names. Useful for fanning out across a subset of projects.

on:
  workflow_call:
    inputs:
      projects:
        type: string
        required: true
      change-filters:
        type: string
        required: false
    outputs:
      projects:
        description: A JSON array of project names
        value: ${{ jobs.get-projects.outputs.projects }}

permissions:
  contents: read

jobs:
  get-projects:
    name: Projects
    outputs:
      projects: ${{ steps.get-projects.outputs.projects }}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5
      - uses: ./.github/actions/get-projects
        id: get-projects
        with:
          projects: ${{ inputs.projects }}
          change-filters: ${{ inputs.change-filters }}
