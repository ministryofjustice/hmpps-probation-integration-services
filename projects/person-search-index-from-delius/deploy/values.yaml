generic-service:
  nameOverride: person-search-index-from-delius
  resources:
    limits:
      memory: 2Gi
    requests:
      memory: 1Gi

  image:
    repository: ghcr.io/ministryofjustice/hmpps-probation-integration-services/person-search-index-from-delius
    port: 9600

  startupProbe:
    httpGet:
      path: /
  readinessProbe:
    httpGet:
      path: /
  livenessProbe:
    httpGet:
      path: /

  ingress:
    tlsSecretName: person-search-index-from-delius-cert

  env:
    CONTACT_INDEX_PREFIX: contact-search
    PERSON_INDEX_PREFIX: person-search
    PIPELINES_ENABLED: person-incremental,person-dlq,contact-incremental,contact-dlq
    JDK_JAVA_OPTIONS: -XX:MaxRAMPercentage=75.0

  namespace_secrets:
    common:
      JDBC_CONNECTION_STRING: DB_STANDBY_URL
    person-search-index-from-delius-database:
      JDBC_USER: DB_USERNAME
      JDBC_PASSWORD: DB_PASSWORD
    person-search-index-from-delius-sentry:
      SENTRY_DSN: SENTRY_DSN
    person-search-index-from-delius-person-queue:
      PERSON_SQS_QUEUE_NAME: QUEUE_NAME
      PERSON_SQS_QUEUE_ACCESS_KEY_ID: AWS_ACCESS_KEY_ID
      PERSON_SQS_QUEUE_SECRET_ACCESS_KEY: AWS_SECRET_ACCESS_KEY
    person-search-index-from-delius-person-dlq:
      PERSON_SQS_DLQ_NAME: QUEUE_NAME
      PERSON_SQS_DLQ_ACCESS_KEY_ID: AWS_ACCESS_KEY_ID
      PERSON_SQS_DLQ_SECRET_ACCESS_KEY: AWS_SECRET_ACCESS_KEY
    person-search-index-from-delius-contact-queue:
      CONTACT_SQS_QUEUE_NAME: QUEUE_NAME
      CONTACT_SQS_QUEUE_ACCESS_KEY_ID: AWS_ACCESS_KEY_ID
      CONTACT_SQS_QUEUE_SECRET_ACCESS_KEY: AWS_SECRET_ACCESS_KEY
    person-search-index-from-delius-contact-dlq:
      CONTACT_SQS_DLQ_NAME: QUEUE_NAME
      CONTACT_SQS_DLQ_ACCESS_KEY_ID: AWS_ACCESS_KEY_ID
      CONTACT_SQS_DLQ_SECRET_ACCESS_KEY: AWS_SECRET_ACCESS_KEY

generic-prometheus-alerts:
  targetApplication: person-search-index-from-delius