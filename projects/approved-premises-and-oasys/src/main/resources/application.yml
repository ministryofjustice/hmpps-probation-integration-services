# Default config
spring:
  security.oauth2.client:
    registration:
      approved-premises-and-oasys:
        provider: hmpps-auth
        authorization-grant-type: client_credentials
        client-id: ${oauth2.client-id}
        client-secret: ${oauth2.client-secret}
    provider:
      hmpps-auth:
        token-uri: http://localhost:${wiremock.port}/auth/oauth/token

management.endpoints.web:
  base-path: /
  exposure.include: "health"

feign.client.config:
  default:
    logger-level: full
    connect-timeout: 5000
    read-timeout: 5000
    default-request-headers:
      Accept: application/json
      Content-Type: application/json


---
# Shared dev/test config
spring.config.activate.on-profile: [ "dev", "integration-test" ]

spring:
  security.oauth2.resourceserver.jwt.public-key-location: classpath:local-public-key.pub

wiremock.enabled: true
context.initializer.classes: uk.gov.justice.digital.hmpps.wiremock.WireMockInitialiser

oauth2:
  client-id: approved-premises-and-oasys
  client-secret: approved-premises-and-oasys

integrations:
  example:
    url: http://localhost:${wiremock.port}/example

management.endpoints.web:
  base-path: /
  exposure.include: [ "health" ]

logging.level:
  uk.gov.justice.digital.hmpps: DEBUG

